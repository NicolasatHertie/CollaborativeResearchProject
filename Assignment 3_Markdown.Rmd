---
title: "Collaborative Research Project - Assignment 3"
bibliography:
- Literature.bib
- Packages.bib
date: "24 October 2014"
output: pdf_document
number_sections: yes
highlight: zenburn
authors: Meilin Moellenkamp and Nicolas Rosemberg
toc: yes
---


repmis::LoadandCite(pkgs, file = 'RpackageCitations.bi
Note: Use a file name that is different from your literature BibTeX file!
b')

```{r, echo=FALSE, include=FALSE}

### 1. Setting Working Directory & Loading the data

# error=FALSE
# Setting the Working Directory
setwd("/Users/Meilin/Desktop/Collaborative Social Data/CollaborativeResearchProject")
# setwd("/Users/Nico/Documents/Hertie/Social science data analysis/CollaborativeResearchProject")


# Loading the merged file from the Working directory
Merged <- read.csv(file="MergedData")
```

```{r, echo=FALSE, include=FALSE}

### 2. Load Required Packages

# install.packages("RJOSONIO")  
library(RJSONIO)
# install.packages("WDI")  
library(WDI)
# install.packages("dplyr")  
library(dplyr) 
# install.packages("tidyr")  
library(tidyr)
# install.packages("httr")  
library(httr) 
# install.packages("dplyr")  
library(dplyr)
# install.packages("XML")  
library(XML)
#install.packages("plyr")
library(plyr)
# install.packages("Amelia")  
library(Amelia) 
#install.packages("XLConnect")
library(XLConnect)    
# install.packages("countrycode")
library("countrycode")
# install.packages ("ggplot2")
library(ggplot2)
# # install.packages ("magrittr") ???
library(magrittr)
# install.packages ("fmsb")
library(fmsb)
# install.packages ("car")
library(car)
```


```{r, echo=FALSE}

####################################################################################
################################ DESCRIPTIVE STATISTICS ############################
####################################################################################

# Not all variables are numeric yet
str(Merged)
# Code variables as numeric
Merged$Incidence <- as.numeric(Merged$Incidence)
Merged$DPT <- as.numeric(Merged$DPT)
Merged$Measles <- as.numeric(Merged$Measles)

### 1. Plotting the dependent variable

# Histogram of dependent variable
Histdep <- hist(Merged$Incidence, breaks= seq(0,5,by=0.1), xlab="HIV Incidence Rate")
axis(side=1, at=seq(0,5, 0.5), labels=seq(0,5,0.5))
axis(side=2, at=seq(0,800,100), labels=seq(0,800,100))

# Look at incidence rate per country
ggplot2::ggplot(Merged, aes(Incidence, country)) + geom_point() + theme_bw()


# Look at difference in incidence rate per country between one year to the next
ggplot2::ggplot(Merged, aes(IncidenceDif, country)) + geom_point() + theme_bw()

# Look at incidence over time - seee the general trend
ggplot(aes(x = year, y = Incidence), data = Merged) + geom_point() + theme_bw() + geom_smooth()

ggplot(aes(x = year, y = Incidence), data = Merged, xlim=c(2000,2012), ylim=c(0,5) + geom_point() + theme_bw() + geom_smooth())

tryplot <- ggplot(Merged, aes(year, Incidence)) + geom_line() + geom_point() + scale_y_continuous(limits=c(0,5),breaks=seq(0,5,0.5),labels=seq(0,5,0.5)) + scale_x_discrete()


tryplot <- ggplot(Merged, aes(year, Incidence)) + geom_line() + geom_point() + scale_y_continuous(limits=c(0,5),breaks=seq(0,5,0.5),labels=seq(0,5,0.5)) + scale_x_discrete(limits=c(2000,2012), breaks=seq(2000,2012,1),labels=seq(2000,2012,1))


tryplot                     
                     
?ggplot

ggplot(mtcars, aes(hp, mpg)) + geom_point()

ggplot2::ggplot(aes(x = year, y = Incidence), data = Merged, xlim=c(2000,2012), ylim=c(0,5) + geom_point() + theme_bw()+ geom_smooth())

plot_IncTime + geom_point() + geom_smooth()

ggplot2::ggplot(Merged, aes(IncidenceDif, year)) + geom_point() + theme_bw()

ggplot2::ggplot(Merged, aes(year, Incidence)) + geom_point() + theme_bw()+ geom_smooth()
axis(side=1, at=seq(0,5, 0.5), labels=seq(0,5,0.5))
axis(side=2, at=seq(0,800,100), labels=seq(0,800,100))

ggplot(aes(data=Merged, x = year, y = Incidence) + geom_point() + theme_bw() + geom_smooth())

# Look at incidence over time - seee the general trend
IncTime <- ggplot(aes(x = year, y = Incidence), data = Merged, + geom_point() + theme_bw())
IncTime + geom_smooth()


#plot_IncTime + theme(axis.title.x = element_blank()) + ylab("Weight (Kg)")

#library(scales)   # Need the scales package
#bp + scale_y_continuous(labels=percent) +
     #scale_x_discrete(labels=abbreviate)  # In this particular case, it has no effect
convert it to integer

# Also possible to set the axis label with the scale
# Note that vertical space is still reserved for x's label
bp + scale_x_discrete(name="") +
     scale_y_continuous(name="Weight (Kg)")
       
# Look at the relation between Incidence and Health Care Spending per capita (+ geom_smooth() for fitting a line)
ggplot2::ggplot(Merged, aes(Incidence, HCexpendpc)) + geom_point() + theme_bw()
ggplot2::ggplot(Merged, aes(Incidence, HCexpend)) + geom_point() + theme_bw()


### 2. Plotting the independent variables

# Scatterplot of general socio-economic, cultural and environmental conditions
scatterplotMatrix(~ Incidence + + GDP + GDPpc + Rural + CO2 + LifeExpect + Population, 
                  transform=TRUE, data=Merged)


# Scatterplot of living and working conditions 
scatterplotMatrix(~ Incidence + Water + Sanitation + Primary + Unemploym + HCexpendpc,
                  transform=TRUE, data=Merged)



# Scatterplot of individual lifestyle factors
scatterplotMatrix(~ Incidence + DPT + Measles, transform=TRUE, data=Merged)
# calculate VIF!!!
>>>>>>> FETCH_HEAD

# function (quantiles)
# summary on data file

# geom(gitter)
# increase fig wisth fig height
# fond size

# random line (y/x) ggplot - xaxis line
```

```{r, echo=FALSE}
# Look at incidence rate per country
ggplot2::ggplot(Merged, aes(Incidence, country), message=FALSE, fig.width=20, fig.height=30) + geom_point() + theme_bw()
#ggplot2::ggplot(Merged, aes(Incidence, country), echo = FALSE, out.width="0.6\\linewidth",fig.width = 3.5,fig.height=2) + geom_point() + theme_bw()

 echo = FALSE, out.width="0.48\\linewidth",fig.width = 3.5,fig.height=2
#\includegraphics[width=50mm,scale=1.5]{method.eps}
```

```{r, echo=FALSE}
# Look at incidence over time - seee the general trend
plot_IncTime <- ggplot(aes(x = year, y = Incidence), data = Merged, xlim=c(2000,2012), ylim=c(0,5) + geom_point() + theme_bw() + geom_smooth())
#plot_IncTime + theme(axis.title.x = element_blank()) + ylab("Weight (Kg)")
```

levels(factor(Merged$iso2c))
aggregate(Merged$iso2c, by=list(Merged$iso2c), FUN=mean)[2]
